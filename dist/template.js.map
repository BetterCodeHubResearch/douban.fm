{"version":3,"sources":["../libs/template.js"],"names":[],"mappings":";;;;;;;QAOgB,IAAI,GAAJ,IAAI;QAIJ,MAAM,GAAN,MAAM;QASN,SAAS,GAAT,SAAS;QAOT,KAAK,GAAL,KAAK;QAOL,OAAO,GAAP,OAAO;QAIP,OAAO,GAAP,OAAO;QAIP,KAAK,GAAL,KAAK;QAKL,IAAI,GAAJ,IAAI;QA6BJ,KAAK,GAAL,KAAK;;mBA5EL,KAAK;;;;qBACH,UAAU;;;;oBACP,eAAe;;wBACf,eAAe;;;;qBAClB,SAAS;;;;mBACX,YAAY;;;;AAErB,SAAS,IAAI,CAAC,OAAO,EAAE;AAC5B,cAAW,mBAAM,MAAM,CAAC,WAAW,CAAC,SAAK,mBAAM,IAAI,CAAC,GAAG,GAAG,iBAAI,OAAO,CAAC,UAAI,OAAO,GAAG,mBAAM,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,CAAA,CAAE;CAChI;;AAEM,SAAS,MAAM,CAAC,IAAI,EAAE;AAC3B,MAAI,QAAQ,GAAG,AAAC,2BAAc,EAAG,CAAA;AACjC,UAAQ,CAAC,MAAM,CAAC;AACd,SAAK,EAAE,IAAI,CAAC,WAAW,IAAI,WAAW;AACtC,QAAI,EAAE,IAAI,CAAC,IAAI,IAAI,iBAAI,UAAU,CAAC,GAAG;AACrC,WAAO,EAAE,IAAI,CAAC,IAAI,IAAI,iBAAI,IAAI,GAAG,IAAI,GAAG,iBAAI,OAAO,EACpD,CAAC,CAAA;CACH;;AAEM,SAAS,SAAS,CAAC,GAAG,EAAE;;AAE7B,QApBO,IAAI,CAoBN,gBAAgB,GAAG,GAAG,GAAG,MAAM,EAAE,UAAC,KAAK,EAAE,MAAM,EAAE,MAAM,EAAK;AAC/D,qBAAI,IAAI,CAAC,MAAM,CAAC,CAAA;GACjB,CAAC,CAAA;CACH;;AAEM,SAAS,KAAK,CAAC,GAAG,EAAE,aAAa,EAAE;AACxC,MAAI,CAAC,GAAG;AACN,WAAO,KAAK,CAAA;GAAA,AAEd,OAAO,mBAAM,aAAa,IAAI,MAAM,CAAC,CAAC,GAAG,CAAC,CAAA;CAC3C;;AAEM,SAAS,OAAO,GAAG;AACxB,SAAO,KAAK,CAAC,cAAc,CAAC,CAAA;CAC7B;;AAEM,SAAS,OAAO,GAAG;AACxB,SAAO,KAAK,CAAC,aAAa,CAAC,CAAA;CAC5B;;AAEM,SAAS,KAAK,GAAG;AACtB,OAAK,CAAC,WAAW,CAAC,CAAC;AACnB,SAAO,mBAAM,MAAM,CAAC,IAAI,CAAC,CAAC;CAC3B;;AAEM,SAAS,IAAI,CAAC,CAAC,EAAE,UAAU,EAAE,OAAO,EAAE;AAC3C,MAAI,KAAK,GAAG,IAAI,CAAC;AACjB,MAAI,IAAI,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,GAAG,EAAE,CAAC;AAC5B,MAAI,CAAC,IAAI,CAAC,KAAK,EAAE;AACf,QAAI,CAAC,IAAI,GAAG,KAAK,GAAG,SAAS,CAAC;AAC9B,QAAI,CAAC,OAAO,EACV,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;;AAEpB,WAAO,mBAAM,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;GAC9B;;AAED,MAAI,CAAC,IAAI,GAAG,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;AACrD,MAAI,CAAC,IAAI,GAAG,mBAAM,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;;AAEpC,MAAI,CAAC,OAAO,EACV,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;;AAEpB,SAAO,CACL,IAAI,CAAC,IAAI,IAAI,CAAC,GAAG,mBAAM,GAAG,CAAC,GAAG,CAAC,GAAG,mBAAM,IAAI,CAAC,GAAG,CAAC,EACjD,mBAAM,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EACvB,mBAAM,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,EAC9B,mBAAM,IAAI,CAAC,yBAAyB,CAAC,EACrC,UAAU,IAAI,mBAAM,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,EAC3C,UAAU,GAAG,EAAE,GAAG,mBAAM,IAAI,CAAC,GAAG,CAAC,EACjC,UAAU,GAAG,EAAE,GAAG,IAAI,CAAC,MAAM,EAC7B,UAAU,GAAG,EAAE,GAAG,mBAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAC/C,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;CACZ;;AAEM,SAAS,KAAK,CAAC,IAAI,EAAE;AAC1B,MAAI,IAAI,qBAAoB,iBAAI,OAAO,YAAO,IAAI,CAAC,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,GAAG,GAAG,GAAG,QAAQ,CAAA,SAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,MAAM,GAAG,EAAE,CAAA,SAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,GAAG,KAAK,GAAG,EAAE,CAAA,SAAG,IAAI,CAAC,MAAM,IAAI,EAAE,CAAA,SAAG,IAAI,CAAC,WAAW,IAAI,EAAE,CAAA,SAAG,IAAI,CAAC,KAAK,GAAG,mBAAM,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAA,AAAE,CAAA;AAC9Q,MAAI,GAAG,+GAA2G,iBAAI,UAAU,CAAC,GAAG,cAAU,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC,GAAG,EAAE,CAAA,qFAAkF,kBAAkB,CAAC,IAAI,CAAC,AAAG,CAAA;;;AAGnT,MAAI,OAAO,CAAC,QAAQ,KAAK,OAAO,EAC9B,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;;AAEhC,SAAO,GAAG,CAAC;CACZ","file":"libs/template.js","sourcesContent":["import sys from 'sys'\nimport color from 'colorful'\nimport { exec } from 'child_process'\nimport Notifier from 'node-notifier'\nimport utils from './utils'\nimport pkg from '../package'\n\nexport function logo(account) {\n  return `${ color.yellow('Douban FM') } ${color.grey('v' + pkg.version)} ${account ? color.grey('/ ' + account.user_name) : ''}`\n}\n\nexport function notify(song) {\n  var notifier = (new Notifier())()\n  notifier.notify({\n    title: song.notifyTitle || 'Douban FM',\n    open: song.open || pkg.repository.url,\n    message: song.text || pkg.name + ' v' + pkg.version,\n  })\n}\n\nexport function updateTab(str) {\n  // @bug: 只有一个 tab 的时候这个 func 会导致 tab 页面闪动\n  exec('printf \"\\\\e]1;' + str + '\\\\a\"', (error, stdout, stderr) => {\n    sys.puts(stdout)\n  })\n}\n\nexport function title(str, selectedColor) {\n  if (!str) \n    return false\n\n  return color[selectedColor || 'grey'](str)\n}\n\nexport function listing() {\n  return title('加载列表中，请稍等...')\n}\n\nexport function loading() {\n  return title('歌曲缓冲中，请稍等..')\n}\n\nexport function pause() {\n  title('Douban FM');\n  return color.yellow('||');\n}\n\nexport function song(s, selectText, silence) {\n  var label = '♫ ';\n  var song = s.title ? s : {};\n  if (!song.title) {\n    song.text = label + '未知曲目...';\n    if (!silence) \n      this.notify(song);\n\n    return color.grey(song.text);\n  }\n\n  song.text = label + song.title + ' - ' + song.artist;\n  song.open = utils.album(song.album);\n\n  if (!silence) \n    this.notify(song);\n\n  return [\n    song.like == 1 ? color.red('♥') : color.grey('♥'),\n    color.green(song.title),\n    color.grey(song.kbps + 'kbps'),\n    color.grey('... ♪ ♫ ♫ ♪ ♫ ♫ ♪ ♪ ...'),\n    selectText || color.yellow(song.albumtitle),\n    selectText ? '' : color.grey('•'),\n    selectText ? '' : song.artist,\n    selectText ? '' : color.grey(song.public_time)\n  ].join(' ')\n}\n\nexport function share(song) {\n  var text = `我正用豆瓣电台命令行版 v${ pkg.version } 收听${song.title ? '「' + song.title + '」' : '本地电台频道'}${song.kbps ? song.kbps + 'kbps' : ''}${song.albumtitle ? song.albumtitle + ' • ' : ''}${song.artist || ''}${song.public_time || ''}${song.album ? utils.album(song.album) : ''}`\n  var uri = `http://service.weibo.com/share/share.php?&type=button'&appkey=3374718187&ralateUid=1644105187'&url='${ pkg.repository.url }&pic=${ song.picture ? song.picture.replace('mpic', 'lpic') : '' }%7C%7Chttp://ww1.sinaimg.cn/large/61ff0de3tw1ecij3dq80bj20m40ez75u.jpg&title=${ encodeURIComponent(text) }`\n\n  // Windows 下终端 `&` 需要转义\n  if (process.platform === 'win32') \n    uri = uri.replace(/&/g, '^&');\n\n  return uri;\n}\n"]}